(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{863:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>c});var r=o(5734),l=o(4038),a=o(1520),n=o(4020);let s=()=>{let[e,t]=(0,l.useState)(null),[o,n]=(0,l.useState)(!1),[s,i]=(0,l.useState)(null),c=async()=>{if(!e)return void i("Seleziona un file prima di caricare.");let o=localStorage.getItem("token");if(!o)return void i("Devi essere loggato per caricare una foto.");let r=new FormData;r.append("file",e);try{n(!0),i(null),await a.A.post("http://localhost:3001/api/auth/upload-profile-image",r,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(o)}}),i("Upload effettuato con successo!"),t(null)}catch(e){console.error(e),i("Errore durante l'upload.")}finally{n(!1)}};return(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files.length>0&&(t(e.target.files[0]),i(null))}}),(0,r.jsx)("button",{onClick:c,disabled:o,children:o?"Caricamento...":"Carica Foto Profilo"}),s&&(0,r.jsx)("p",{children:s})]})};var i=o(4088);let c=()=>{let[e,t]=(0,l.useState)(null),[o,c]=(0,l.useState)(null),u=(0,n.useRouter)();return((0,l.useEffect)(()=>{let e=localStorage.getItem("token");if(console.log("Token usato nella richiesta:",e),!e)return void u.push("/login");a.A.get("http://localhost:3001/api/auth/Profile",{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{t(e.data)}).catch(e=>{console.error(e),c("Sessione scaduta o accesso non autorizzato."),localStorage.removeItem("token"),localStorage.removeItem("user"),u.push("/login")})},[u]),o)?(0,r.jsx)("p",{style:{color:"red"},children:o}):e?(0,r.jsxs)("div",{children:[e.profileImageUrl&&(0,r.jsx)("img",{src:"http://localhost:3001".concat(e.profileImageUrl),alt:"Foto Profilo",style:{width:"150px",borderRadius:"50%"}}),(0,r.jsx)(s,{}),(0,r.jsx)("h2",{children:"Profilo Utente"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Nome:"})," ",e.firstName]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Cognome:"})," ",e.lastName]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Telefono:"})," ",e.phoneNumber]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Provincia:"})," ",e.province]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Luogo di nascita:"})," ",e.birthdayPlace]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Data di nascita:"})," ",new Date(e.birthday).toLocaleDateString()]}),(0,r.jsx)(i.A,{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),u.push("/login")},children:"Logout"})]}):(0,r.jsx)("p",{children:"Caricamento profilo..."})}},4088:(e,t,o)=>{"use strict";o.d(t,{A:()=>l});var r=o(5734);o(4038);let l=e=>{let{children:t,...o}=e;return(0,r.jsx)("button",{...o,children:t})}},8892:(e,t,o)=>{Promise.resolve().then(o.bind(o,863))}},e=>{e.O(0,[185,265,538,358],()=>e(e.s=8892)),_N_E=e.O()}]);