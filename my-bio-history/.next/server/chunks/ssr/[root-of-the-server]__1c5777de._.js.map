{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///home/alessandro/repo/Repofront/my-bio-history-frontend/my-bio-history/src/app/components/upload.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\n\nconst UploadProfileImage: React.FC = () => {\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [uploading, setUploading] = useState(false);\n  const [message, setMessage] = useState<string | null>(null);\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      setSelectedFile(e.target.files[0]);\n      setMessage(null);\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!selectedFile) {\n      setMessage('Seleziona un file prima di caricare.');\n      return;\n    }\n\n    const token = localStorage.getItem('token');\n    if (!token) {\n      setMessage('Devi essere loggato per caricare una foto.');\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('file', selectedFile);\n\n    try {\n      setUploading(true);\n      setMessage(null);\n\n      // Cambia l'URL se il tuo endpoint Ã¨ differente\n      const response = await axios.post('http://localhost:3001/api/auth/upload-profile-image', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          Authorization: `Bearer ${token}`,\n        },\n      });\n\n      setMessage('Upload effettuato con successo!');\n      setSelectedFile(null);\n    } catch (error) {\n      console.error(error);\n      setMessage('Errore durante l\\'upload.');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  return (\n    <div>\n      <input type=\"file\" accept=\"image/*\" onChange={handleFileChange} />\n      <button onClick={handleUpload} disabled={uploading}>\n        {uploading ? 'Caricamento...' : 'Carica Foto Profilo'}\n      </button>\n      {message && <p>{message}</p>}\n    </div>\n  );\n};\n\nexport default UploadProfileImage;\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAEA,MAAM,qBAA+B;IACnC,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,oUAAA,CAAA,WAAQ,AAAD,EAAe;IAC9D,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,oUAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,oUAAA,CAAA,WAAQ,AAAD,EAAiB;IAEtD,MAAM,mBAAmB,CAAC;QACxB,IAAI,EAAE,MAAM,CAAC,KAAK,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG;YAC/C,gBAAgB,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;YACjC,WAAW;QACb;IACF;IAEA,MAAM,eAAe;QACnB,IAAI,CAAC,cAAc;YACjB,WAAW;YACX;QACF;QAEA,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,CAAC,OAAO;YACV,WAAW;YACX;QACF;QAEA,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,QAAQ;QAExB,IAAI;YACF,aAAa;YACb,WAAW;YAEX,+CAA+C;YAC/C,MAAM,WAAW,MAAM,wLAAA,CAAA,UAAK,CAAC,IAAI,CAAC,uDAAuD,UAAU;gBACjG,SAAS;oBACP,gBAAgB;oBAChB,eAAe,CAAC,OAAO,EAAE,OAAO;gBAClC;YACF;YAEA,WAAW;YACX,gBAAgB;QAClB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;YACd,WAAW;QACb,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,6WAAC;;0BACC,6WAAC;gBAAM,MAAK;gBAAO,QAAO;gBAAU,UAAU;;;;;;0BAC9C,6WAAC;gBAAO,SAAS;gBAAc,UAAU;0BACtC,YAAY,mBAAmB;;;;;;YAEjC,yBAAW,6WAAC;0BAAG;;;;;;;;;;;;AAGtB;uCAEe","debugId":null}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///home/alessandro/repo/Repofront/my-bio-history-frontend/my-bio-history/src/app/profile/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useRouter } from 'next/navigation';\nimport UploadProfileImage from '../components/upload';\nimport Button from '../components/navigation/navbar/button';\n\ninterface UserProfile {\n  id: number;\n  username: string;\n  email: string;\n  firstName: string;\n  lastName: string;\n  birthday: Date;\n  birthdayPlace: string;\n  province: string;\n  sex: string;\n  phoneNumber: number;\n  profileImageUrl?: string;\n}\n\nconst Profile: React.FC = () => {\n  const [user, setUser] = useState<UserProfile | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const router = useRouter();\n\n  const backendURL = 'http://localhost:3001/api/auth/Profile';\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    console.log('Token usato nella richiesta:', token);\n\n    if (!token) {\n      router.push('/login'); // attenzione: lowercase\n      return;\n    }\n\n    axios\n      .get<UserProfile>(backendURL, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then(res => {\n        setUser(res.data);\n      })\n      .catch(err => {\n        console.error(err);\n        setError('Sessione scaduta o accesso non autorizzato.');\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        router.push('/login');\n      });\n  }, [router]);\n\n  if (error) return <p style={{ color: 'red' }}>{error}</p>;\n  if (!user) return <p>Caricamento profilo...</p>;\n\n  return (\n    <div>\n      {user.profileImageUrl && (\n        <img\n          src={`http://localhost:3001${user.profileImageUrl}`}\n          alt=\"Foto Profilo\"\n          style={{ width: '150px', borderRadius: '50%' }}\n        />\n      )}\n      <UploadProfileImage />\n      <h2>Profilo Utente</h2>\n      <p><strong>Nome:</strong> {user.firstName}</p>\n      <p><strong>Cognome:</strong> {user.lastName}</p>\n      <p><strong>Email:</strong> {user.email}</p>\n      <p><strong>Telefono:</strong> {user.phoneNumber}</p>\n      <p><strong>Provincia:</strong> {user.province}</p>\n      <p><strong>Luogo di nascita:</strong> {user.birthdayPlace}</p>\n      <p><strong>Data di nascita:</strong> {new Date(user.birthday).toLocaleDateString()}</p>\n\n      <Button\n        onClick={() => {\n          localStorage.removeItem('token');\n          localStorage.removeItem('user');\n          router.push('/login');\n        }}\n      >\n        Logout\n      </Button>\n    </div>\n  );\n};\n\nexport default Profile;\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAsBA,MAAM,UAAoB;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,oUAAA,CAAA,WAAQ,AAAD,EAAsB;IACrD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,oUAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,SAAS,CAAA,GAAA,iQAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,aAAa;IAEnB,CAAA,GAAA,oUAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,QAAQ,GAAG,CAAC,gCAAgC;QAE5C,IAAI,CAAC,OAAO;YACV,OAAO,IAAI,CAAC,WAAW,wBAAwB;YAC/C;QACF;QAEA,wLAAA,CAAA,UAAK,CACF,GAAG,CAAc,YAAY;YAC5B,SAAS;gBACP,eAAe,CAAC,OAAO,EAAE,OAAO;YAClC;QACF,GACC,IAAI,CAAC,CAAA;YACJ,QAAQ,IAAI,IAAI;QAClB,GACC,KAAK,CAAC,CAAA;YACL,QAAQ,KAAK,CAAC;YACd,SAAS;YACT,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,OAAO,IAAI,CAAC;QACd;IACJ,GAAG;QAAC;KAAO;IAEX,IAAI,OAAO,qBAAO,6WAAC;QAAE,OAAO;YAAE,OAAO;QAAM;kBAAI;;;;;;IAC/C,IAAI,CAAC,MAAM,qBAAO,6WAAC;kBAAE;;;;;;IAErB,qBACE,6WAAC;;YACE,KAAK,eAAe,kBACnB,6WAAC;gBACC,KAAK,CAAC,qBAAqB,EAAE,KAAK,eAAe,EAAE;gBACnD,KAAI;gBACJ,OAAO;oBAAE,OAAO;oBAAS,cAAc;gBAAM;;;;;;0BAGjD,6WAAC,2JAAA,CAAA,UAAkB;;;;;0BACnB,6WAAC;0BAAG;;;;;;0BACJ,6WAAC;;kCAAE,6WAAC;kCAAO;;;;;;oBAAc;oBAAE,KAAK,SAAS;;;;;;;0BACzC,6WAAC;;kCAAE,6WAAC;kCAAO;;;;;;oBAAiB;oBAAE,KAAK,QAAQ;;;;;;;0BAC3C,6WAAC;;kCAAE,6WAAC;kCAAO;;;;;;oBAAe;oBAAE,KAAK,KAAK;;;;;;;0BACtC,6WAAC;;kCAAE,6WAAC;kCAAO;;;;;;oBAAkB;oBAAE,KAAK,WAAW;;;;;;;0BAC/C,6WAAC;;kCAAE,6WAAC;kCAAO;;;;;;oBAAmB;oBAAE,KAAK,QAAQ;;;;;;;0BAC7C,6WAAC;;kCAAE,6WAAC;kCAAO;;;;;;oBAA0B;oBAAE,KAAK,aAAa;;;;;;;0BACzD,6WAAC;;kCAAE,6WAAC;kCAAO;;;;;;oBAAyB;oBAAE,IAAI,KAAK,KAAK,QAAQ,EAAE,kBAAkB;;;;;;;0BAEhF,6WAAC,mLAAA,CAAA,UAAM;gBACL,SAAS;oBACP,aAAa,UAAU,CAAC;oBACxB,aAAa,UAAU,CAAC;oBACxB,OAAO,IAAI,CAAC;gBACd;0BACD;;;;;;;;;;;;AAKP;uCAEe","debugId":null}}]
}